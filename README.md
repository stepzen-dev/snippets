<p align="center">
  <a aria-label="StepZen logo" href="https://stepzen.com">
    <img src="https://img.shields.io/badge/-MADE%20BY%20STEPZEN-%23193460?style=for-the-badge&logo=data:image/png;base64,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&labelColor=#193460">
  </a>
  <a aria-label="License" href="https://github.com/stepzen-dev/snippets/blob/main/LICENSE">
    <img alt="" src="https://img.shields.io/badge/License-MIT-0cb3ca?style=for-the-badge&labelColor=8b6091">
  </a>
    <a aria-label="Stargazers" href="https://github.com/stepzen-dev/snippets/stargazers">
    <img alt="" src="https://img.shields.io/badge/See%20who%20follows%20this%20repo-Stargazers-dd854c?style=for-the-badge&logo=appveyor">
  </a>
    <a aria-label="Contributors" href="https://github.com/stepzen-dev/snippets/graphs/contributors">
    <img alt="" src="https://img.shields.io/badge/See%20who%20made%20this%20repo-Contributors-c9eef3?style=for-the-badge&logo=appveyor">
</p>

<!-- PROJECT LOGO -->
<br />
<div align="center">
  <a href="https://github.com/othneildrew/Best-README-Template">
    <img src="https://stepzen.com/images/logo.jpg" alt="Logo" width="50%">
  </a>

  <h3 align="center">StepZen Snippets</h3>

  <p align="center">
    Welcome! <a href="https://stepzen.com/"><strong>StepZen</strong></a> is a unique and declarative way to build & run any-sized Graph in minutes.

- [Explore the docs](https://stepzen.com/docs)
- [View Demo](https://stepzen.com/developers/videos/graph-of-graphs)
- [Report Bug](https://github.com/stepzen-dev/snippets/issues)
- [Request Snippet](https://github.com/stepzen-dev/issues)
- [Join our Discord Server](https://discord.com/invite/9k2VdPn2FR)
  </p>
</div>

<!-- TABLE OF CONTENTS -->
<details>
  <summary>Table of Contents</summary>
  <ol>
    <li>
      <a href="#about-the-project">About The Project</a>
    </li>
    <li><a href="#transforms">`@transforms`</a></li>
    <li><a href="#sequence">`@sequence`</a></li>
    <li><a href="#protection">protection</a></li>
    <li><a href="#rest-calls-and-responses">`@rest` calls and responses</a></li>

  </ol>
</details>

## About the project

This repo contains `.graphql` (and in some case, `config.yaml` files) for various "self-contained" example code for doing operations in StepZen.

## Getting Started

[Install](https://stepzen.com/docs/quick-start/install-and-setup) the StepZen command line interface.

To run these examples,

- `git clone` this repo
- Change to the right working directory.
- run `stepzen start`

## transforms

For more on what `transforms` is and how it operates within the custom `@rest` directive, [see our documentation](https://stepzen.com/docs/custom-graphql-directives/directives#transforms).

These are available in `/transforms`:

- `/filter` shows how the response of a REST API can be filtered
- `/combineintostring` shows how a new field in the return type can be created by concatenating some other fields (like address parts into one address)
- `/jsonobjectToJsonarray` shows how an array of data (say coords) can be converted into an object, `{"lat":, "lon",..}` so that it can be fed into some other system that requires data to be expressed that way
- `/jsonobjectToJsonarray` shows how an object (typically where each key is an id of a record) can be converted into an array (e.g., `{"1":{"name": "john"}, "2": "jane"}` can be converted to `[{"id":"1", "name": "john"}, {"id":"2", name: "jane"}]`), so that it can then behave well for GraphQL processing.

## @sequence

View the StepZen [documentation](https://stepzen.com/docs/custom-graphql-directives/directives#-sequence) on the custom directive `@sequence`.

These are available in `/sequence`:

- `/arguments` shows how query arguments get passed down a sequence
- `/forLoops` shows how sequence acts as a nested for loop
- `/transformsInMaterializer` shows how connecting two subgraphs can invoke transformations in between. For example, the `city` of a customer can be fed into a `weather` that takes `lat,lon` by calling some geocoding in the sequence
- `/useOfJSON` shows how, in long sequences, a new type does not have to created for every step--treat everything as JSON up to the last step, and your type system stays clean.

## protection

For more information on protecting your API, [see our documentation](https://stepzen.com/docs/access-control).

In `/protection`, you will find several subdirectories. Each contains a `.graphql` file, and `index.graphql` file and a `config.yaml` settings (which enables you to get extremely granular (or coarse) with protecting who can call what query/mutation).

- `/makeAllPublic` shows how you can easily make all queries public.
- `/makeSomePublic` shows how you can make some public, and some private (which can still be accessed using your `admin` or `service` keys)

## @rest calls and responses

Where possible, we use [httpbin.org](http://httpbin.org) as our REST endpoint, since it allows us to mimic lots of REST capabilities.

- `/restWithParameters` shows how GraphQL query arguments are automatically added to the REST call--there is nothing for you to do!
- `/restWithConfigYaml` shows how REST query parameters can also be fetched from `config.yaml`--this allows you to keep your SDL code separate from your secrets.
- `/postbody` shows how a POST body can be automatically filled with query arguments when the `Content-Type:application/x-www-form-urlencoded`. This is the easiest way to send postbodies down the REST API
- `/morecomplexpost` shows how a POST body can be filled with query arguments using `{{.Get \"name-of-query-argument\"}}` when the `Content-Type:application/x-www-form-urlencoded`.

## union types

Union types are valuable when you have a field that can return one of several types.

- `/errorsAsData` shows how to implement the "errors as data" pattern. This is useful when you want to return a field that can return either a value or an error.

<!-- MARKDOWN LINKS & IMAGES -->
<!-- https://www.markdownguide.org/basic-syntax/#reference-style-links -->

[contributors-shield]: https://img.shields.io/github/contributors/othneildrew/Best-README-Template.svg?style=for-the-badge
[contributors-url]: https://github.com/othneildrew/Best-README-Template/graphs/contributors
[forks-shield]: https://img.shields.io/github/forks/othneildrew/Best-README-Template.svg?style=for-the-badge
[forks-url]: https://github.com/othneildrew/Best-README-Template/network/members
[stars-shield]: https://img.shields.io/github/stars/othneildrew/Best-README-Template.svg?style=for-the-badge
[stars-url]: https://github.com/othneildrew/Best-README-Template/stargazers
[issues-shield]: https://img.shields.io/github/issues/othneildrew/Best-README-Template.svg?style=for-the-badge
[issues-url]: https://github.com/othneildrew/Best-README-Template/issues
[license-shield]: https://img.shields.io/github/license/othneildrew/Best-README-Template.svg?style=for-the-badge
[license-url]: https://github.com/othneildrew/Best-README-Template/blob/master/LICENSE.txt
[linkedin-shield]: https://img.shields.io/badge/-LinkedIn-black.svg?style=for-the-badge&logo=linkedin&colorB=555
[linkedin-url]: https://linkedin.com/in/othneildrew
[product-screenshot]: images/screenshot.png
